## Архитектура

Цель — плоская, поддерживаемая структура по слоям (конфиг/модели/сервисы/интерфейс), близкая к FSD в духе разделения ответственности.

```
app.py                      — точка входа, сборка приложения
app/
  config.py                 — настройки, константы, словари месяцев и знаков
  models.py                 — типы данных (Order)
  texts.py                  — тексты и билдеры сообщений
  handlers/                 — aiogram-роутеры
    navigation.py           — /start, выбор года/месяца/знака, оплата
  keyboards/                — сборка инлайн-клавиатур
    navigation.py
  services/                 — бизнес-логика и инфраструктура
    media.py                — сканирование медиа, поиск годов/месяцев/знаков и файлов
    db.py                   — работа с SQLite (создание/обновление заказов)
    parsing.py              — парсинг callback-данных и product_id
    messaging.py            — отправка документов
```

## Поток работы бота

1. Пользователь отправляет `/start`. Бот сканирует `MEDIA_DIR` и показывает клавиатуру доступных лет (по подпапкам `YYYY-MM`).
2. При выборе года бот предлагает только те месяцы, чьи папки реально существуют.
3. При выборе месяца бот ищет доступные знаки в `media/YYYY-MM`:
   - файлы `sign.ext` (`aries.jpg`);
   - или подпапки со знаком (`aries/file.png`).
4. При выборе знака проверяется наличие файла. Создается заказ в SQLite, показывается цена и кнопка оплаты.
5. При оплате отправляется invoice через Telegram/YooKassa, после успешного платежа файл отправляется как документ. Все статусы заказа сохраняются.

## Ключевые зависимости

- `aiogram` — маршрутизация и работа с Telegram Bot API.
- `aiosqlite` — асинхронная работа с SQLite.
- `pydantic-settings` — загрузка настроек из `.env`.
