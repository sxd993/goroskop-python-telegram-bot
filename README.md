# Telegram гороскоп-бот

Python 3.11, aiogram 3, платежи через YooKassa. Контент берется динамически из папки `media`: подпапки формата `YYYY-MM`, внутри — файлы (или подпапки) со знаком `sign.ext` (`aries.jpg`, `capricorn/file.png`). Цена по умолчанию 390 ₽ (39000 копеек). База SQLite `data/bot.sqlite3`.

## Запуск

1. Создай и активируй виртуальное окружение.
2. Установи зависимости: `pip install -r requirements.txt`.
3. Заполни `.env`: `BOT_TOKEN`, `PROVIDER_TOKEN`, опционально `PRICE_KOPEKS`, `CURRENCY`, `MEDIA_DIR`, `DB_PATH`.
   - Для доступа к админ-меню (загрузка прогнозов) укажи `ADMIN_IDS` — список ID через запятую.
4. Подготовь `media/YYYY-MM/sign.ext`.
5. Запусти бота:
   ```bash
   python app.py
   ```

## Структура кода

- `app.py` — точка входа: загрузка настроек, инициализация БД, сборка бота.
- `app/config.py` — настройки, константы (месяцы, знаки, расширения).
- `app/models.py` — типы и модели (заказ).
- `app/services/` — бизнес-логика:
  - `media.py` — сканирование медиа, поиск лет/месяцев/знаков и файлов.
  - `db.py` — работа с SQLite, статусы заказов.
  - `parsing.py` — парсинг callback-данных.
  - `messaging.py` — отправка файлов.
- `app/keyboards/` — инлайн-клавиатуры для навигации и оплаты.
- `app/texts.py` — тексты и билдеры сообщений.
- `app/handlers/` — aiogram-роутеры и обработчики.
